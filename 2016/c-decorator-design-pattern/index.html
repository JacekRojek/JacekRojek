<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>C# Decorator Design Pattern</title>
  <meta name="description" content="Software development blog">
  <meta name="author" content="Jacek Rojek">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Jacek  Rojek">
  <meta name="twitter:description" content="Software development blog">

  <meta property="og:type" content="article">
  <meta property="og:title" content="Jacek  Rojek">
  <meta property="og:description" content="Software development blog">

  <link rel="apple-touch-icon" sizes="57x57" href="/JacekRojek/images/favicons/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/JacekRojek/images/favicons/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/JacekRojek/images/favicons/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/JacekRojek/images/favicons/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/JacekRojek/images/favicons/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/JacekRojek/images/favicons/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/JacekRojek/images/favicons/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/JacekRojek/images/favicons/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/JacekRojek/images/favicons/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" href="/JacekRojek/images/favicons/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/JacekRojek/images/favicons/favicon-194x194.png" sizes="194x194">
  <link rel="icon" type="image/png" href="/JacekRojek/images/favicons/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/JacekRojek/images/favicons/android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="/JacekRojek/images/favicons/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="/JacekRojek/images/favicons/manifest.json">
  <link rel="shortcut icon" href="/JacekRojek/images/favicons/favicon.ico">
  <meta name="msapplication-TileColor" content="#ffc40d">
  <meta name="msapplication-TileImage" content="/JacekRojek/images/favicons/mstile-144x144.png">
  <meta name="theme-color" content="#ffffff">

  <link rel="stylesheet" href="/JacekRojek/css/main.css">
  <link rel="canonical" href="https://jacekrojek.github.io/JacekRojek//JacekRojek//2016/c-decorator-design-pattern/">
  <link rel="alternate" type="application/rss+xml" title="Jacek  Rojek" href="/JacekRojek/feed.xml">
</head>


  <body>
    <span class="mobile btn-mobile-menu">
  <i class="icon icon-list btn-mobile-menu__icon"></i>
  <i class="icon icon-x-circle btn-mobile-close__icon hidden"></i>
</span>
  
<header class="panel-cover" style="background-image: url(/JacekRojek/images/cover.jpg)">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">
        <a href="/JacekRojek/" title="link to home of Jacek  Rojek">
          <img src="/JacekRojek/images/profile.jpg" class="user-image" alt="My Profile Photo">
          <h1 class="panel-cover__title panel-title">Jacek  Rojek</h1>
        </a>
        <hr class="panel-cover__divider">
        <p class="panel-cover__description">Software development blog</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary">

        <div class="navigation-wrapper">

          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">
              <li class="navigation__item"><a href="/JacekRojek/#blog" title="link to Jacek  Rojek blog" class="blog-button">Blog</a></li>
            </ul>
          </nav>

          <nav class="cover-navigation navigation--social">
            <ul class="navigation">
          
            
              <!-- Twitter -->
              <li class="navigation__item">
                <a href="http://twitter.com/JRojek93" title="@JRojek93 on Twitter" target="_blank">
                  <i class="icon icon-social-twitter"></i>
                  <span class="label">Twitter</span>
                </a>
              </li>
            

            
              <!-- Facebook -->
              <li class="navigation__item">
                <a href="http://fb.me/jacek.rojek.7" title="jacek.rojek.7 on Facebook" target="_blank">
                  <i class="icon icon-social-facebook"></i>
                  <span class="label">Facebook</span>
                </a>
              </li>
            

            
              <!-- LinkedIn -->
              <li class="navigation__item">
                <a href="https://www.linkedin.com/in/jacek-rojek-b7a396105" title="jacek-rojek-b7a396105 on LinkedIn" target="_blank">
                  <i class="icon icon-social-linkedin"></i>
                  <span class="label">LinkedIn</span>
                </a>
              </li>
            

            
              <!-- GitHub -->
              <li class="navigation__item">
                <a href="https://www.github.com/JacekRojek" title="JacekRojek on GitHub" target="_blank">
                  <i class="icon icon-social-github"></i>
                  <span class="label">GitHub</span>
                </a>
              </li>
            

            
              <!-- Email -->
              <li class="navigation__item">
                <a href="mailto:j.rojek19@gmail.com" title="Email j.rojek19@gmail.com" target="_blank">
                  <i class="icon icon-mail"></i>
                  <span class="label">Email</span>
                </a>
              </li>
            

            <!-- RSS -->
            <li class="navigation__item">
              <a href="/JacekRojek/feed.xml" title="Subscribe" target="_blank">
                <i class="icon icon-rss"></i>
                <span class="label">RSS</span>
              </a>
            </li>
          
            </ul>
          </nav>

        </div>

      </div>

    </div>

    <div class="panel-cover--overlay"></div>
  </div>
</header>


    <div class="content-wrapper">
      <div class="content-wrapper__inner">
        <article class="post-container post-container--single">
  <header class="post-header">
    <div class="post-meta">
      <time datetime="30 Jun 2016" class="post-meta__date date">30 Jun 2016</time> &#8226; <span class="post-meta__tags">on </span>
    </div>
    <h1 class="post-title">C# Decorator Design Pattern</h1>
  </header>

  <section class="post">
    <p><a href="http://pastebin.com/XhWGM7LE">Link to Source code</a></p>

<p>In this article You will learn how to implement decorator pattern in C#. Decorator pattern allows to modify an object dynamically it simplifies the code by adding new functionality at runtime. Adding new functionality to the object doesn’t effect the initial class structure.</p>

<p>In my example I’ll simulate the process of enchanting an item in RPG game.</p>
<h2>UML Diagram:</h2>
<p><img class="alignnone size-full wp-image-3614" src="https://indiedevart.files.wordpress.com/2016/06/l11.png" alt="l11" width="750" height="452" /></p>
<h2>Component</h2>
<p>This interface will be used as base for decorator and concrete items. It contains methods that will return properties of an item.</p>

<div class="language-c# highlighter-rouge"><pre class="highlight"><code><span class="k">public</span> <span class="k">interface</span> <span class="n">IItem</span>
<span class="p">{</span>
    <span class="kt">string</span> <span class="nf">GetName</span><span class="p">();</span>
    <span class="kt">int</span> <span class="nf">GetValue</span><span class="p">();</span>
<span class="p">}</span>

</code></pre>
</div>

<p> </p>

<p>Base Items like armor or Sword will implement this interface, And return fixed values.</p>

<p> </p>

<div class="language-c# highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Sword</span> <span class="p">:</span> <span class="n">IItem</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="nf">GetName</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="p">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="n">Iron</span> <span class="n">Sword</span><span class="p">&amp;</span><span class="n">quot</span><span class="p">;;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="kt">int</span> <span class="nf">GetValue</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="m">20</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>
<h2>Decorator</h2>
<p>This is the key part of the pattern, it maintains a reference to a Component object and defines an interface that conforms to Component’s interface. In my example this will be represented as an Enchantment of the item. Decorater will have form of abstract class and will have protected constructor</p>
<blockquote>A protected member is accessible within its class and by derived class instances.</blockquote>
<div class="language-c# highlighter-rouge"><pre class="highlight"><code><span class="k">abstract</span> <span class="k">class</span> <span class="nc">Enchantment</span> <span class="p">:</span> <span class="n">IItem</span>
<span class="p">{</span>
  <span class="n">IItem</span> <span class="n">_item</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span>

  <span class="k">protected</span> <span class="kt">int</span> <span class="n">_Value</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>

  <span class="k">protected</span> <span class="nf">Enchantment</span><span class="p">(</span><span class="n">IItem</span> <span class="n">baseItem</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">_item</span> <span class="p">=</span> <span class="n">baseItem</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">public</span> <span class="kt">string</span> <span class="nf">GetName</span><span class="p">()</span>
  <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">_item</span><span class="p">.</span><span class="nf">GetName</span><span class="p">()</span> <span class="p">+&amp;</span><span class="n">quot</span><span class="p">;</span> <span class="p">+</span><span class="m">1</span> <span class="p">&amp;</span><span class="n">quot</span><span class="p">;);</span>
  <span class="p">}</span>

  <span class="k">public</span> <span class="kt">int</span> <span class="nf">GetValue</span><span class="p">()</span>
  <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">_item</span><span class="p">.</span><span class="nf">GetValue</span><span class="p">()</span> <span class="p">+</span> <span class="n">_Value</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre>
</div>

<p> </p>

<p>Class that extends the Decorator can change the protected vales in parent to eventually change the return values.</p>

<div class="language-c# highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Magic</span> <span class="p">:</span> <span class="n">Enchantment</span>
<span class="p">{</span>
  <span class="k">public</span> <span class="nf">Magic</span><span class="p">(</span><span class="n">IItem</span> <span class="n">baseComponent</span><span class="p">):</span> <span class="k">base</span><span class="p">(</span><span class="n">baseComponent</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="n">_Value</span> <span class="p">=</span> <span class="m">30</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>
<h2>Client</h2>
<p>Last part of an application. Here the instance of an item is created and modified. In this example you can see how the values changed after adding decorator.</p>

<div class="language-c# highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Program</span>
<span class="p">{</span>
  <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">IItem</span> <span class="n">newItem</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Sword</span><span class="p">();</span>
    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">newItem</span><span class="p">.</span><span class="nf">GetName</span><span class="p">()</span> <span class="p">+</span> <span class="p">&amp;</span><span class="n">quot</span><span class="p">;</span> <span class="n">Value</span><span class="p">:</span> <span class="p">&amp;</span><span class="n">quot</span><span class="p">;</span> <span class="p">+</span> <span class="n">newItem</span><span class="p">.</span><span class="nf">GetValue</span><span class="p">().</span><span class="nf">ToString</span><span class="p">());</span>

    <span class="n">newItem</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Magic</span><span class="p">(</span><span class="n">newItem</span><span class="p">);</span>
    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">newItem</span><span class="p">.</span><span class="nf">GetName</span><span class="p">()</span> <span class="p">+</span> <span class="p">&amp;</span><span class="n">quot</span><span class="p">;</span> <span class="n">Value</span><span class="p">:</span> <span class="p">&amp;</span><span class="n">quot</span><span class="p">;</span> <span class="p">+</span> <span class="n">newItem</span><span class="p">.</span><span class="nf">GetValue</span><span class="p">().</span><span class="nf">ToString</span><span class="p">());</span>

    <span class="n">Console</span><span class="p">.</span><span class="nf">ReadLine</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<p> </p>

<p>To conclude, Decorator can attach additional responsibilities to an object dynamically. Decorators provide a flexible alternative to sub-classing for extending functionality. I hope that this was understandable and it will help you with your projects. This was probably the last design pattern to cover on my blog, last in this month at least. Stay Awesome!</p>

<p> </p>

<p> </p>

  </section>
  
  <script>

</script>

</article>



      </div>

      <footer class="footer">
  <span class="footer__copyright">&copy; 2016 Jacek Rojek. All rights reserved.</span>
</footer> 

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script type="text/javascript" src="/JacekRojek/js/main.js"></script>

    </div>
  </body>
</html>