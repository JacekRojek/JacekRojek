<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Unity Achievements System Tutorial Pt.2</title>
  <meta name="description" content="Software development blog">
  <meta name="author" content="Jacek Rojek">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Jacek  Rojek">
  <meta name="twitter:description" content="Software development blog">

  <meta property="og:type" content="article">
  <meta property="og:title" content="Jacek  Rojek">
  <meta property="og:description" content="Software development blog">

  <link rel="apple-touch-icon" sizes="57x57" href="/JacekRojek/images/favicons/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/JacekRojek/images/favicons/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/JacekRojek/images/favicons/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/JacekRojek/images/favicons/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/JacekRojek/images/favicons/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/JacekRojek/images/favicons/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/JacekRojek/images/favicons/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/JacekRojek/images/favicons/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/JacekRojek/images/favicons/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" href="/JacekRojek/images/favicons/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/JacekRojek/images/favicons/favicon-194x194.png" sizes="194x194">
  <link rel="icon" type="image/png" href="/JacekRojek/images/favicons/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/JacekRojek/images/favicons/android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="/JacekRojek/images/favicons/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="/JacekRojek/images/favicons/manifest.json">
  <link rel="shortcut icon" href="/JacekRojek/images/favicons/favicon.ico">
  <meta name="msapplication-TileColor" content="#ffc40d">
  <meta name="msapplication-TileImage" content="/JacekRojek/images/favicons/mstile-144x144.png">
  <meta name="theme-color" content="#ffffff">

  <link rel="stylesheet" href="/JacekRojek/css/main.css">
  <link rel="canonical" href="https://jacekrojek.github.io/JacekRojek//JacekRojek//2016/achievements-system-pt-2/">
  <link rel="alternate" type="application/rss+xml" title="Jacek  Rojek" href="/JacekRojek/feed.xml">
</head>


  <body>
    <span class="mobile btn-mobile-menu">
  <i class="icon icon-list btn-mobile-menu__icon"></i>
  <i class="icon icon-x-circle btn-mobile-close__icon hidden"></i>
</span>
  
<header class="panel-cover" style="background-image: url(/JacekRojek/images/cover.jpg)">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">
        <a href="/JacekRojek/" title="link to home of Jacek  Rojek">
          <img src="/JacekRojek/images/profile.jpg" class="user-image" alt="My Profile Photo">
          <h1 class="panel-cover__title panel-title">Jacek  Rojek</h1>
        </a>
        <hr class="panel-cover__divider">
        <p class="panel-cover__description">Software development blog</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary">

        <div class="navigation-wrapper">

          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">
              <li class="navigation__item"><a href="/JacekRojek/#blog" title="link to Jacek  Rojek blog" class="blog-button">Blog</a></li>
            </ul>
          </nav>

          <nav class="cover-navigation navigation--social">
            <ul class="navigation">
          
            
              <!-- Twitter -->
              <li class="navigation__item">
                <a href="http://twitter.com/JRojek93" title="@JRojek93 on Twitter" target="_blank">
                  <i class="icon icon-social-twitter"></i>
                  <span class="label">Twitter</span>
                </a>
              </li>
            

            
              <!-- Facebook -->
              <li class="navigation__item">
                <a href="http://fb.me/jacek.rojek.7" title="jacek.rojek.7 on Facebook" target="_blank">
                  <i class="icon icon-social-facebook"></i>
                  <span class="label">Facebook</span>
                </a>
              </li>
            

            
              <!-- LinkedIn -->
              <li class="navigation__item">
                <a href="https://www.linkedin.com/in/jacek-rojek-b7a396105" title="jacek-rojek-b7a396105 on LinkedIn" target="_blank">
                  <i class="icon icon-social-linkedin"></i>
                  <span class="label">LinkedIn</span>
                </a>
              </li>
            

            
              <!-- GitHub -->
              <li class="navigation__item">
                <a href="https://www.github.com/JacekRojek" title="JacekRojek on GitHub" target="_blank">
                  <i class="icon icon-social-github"></i>
                  <span class="label">GitHub</span>
                </a>
              </li>
            

            
              <!-- Email -->
              <li class="navigation__item">
                <a href="mailto:j.rojek19@gmail.com" title="Email j.rojek19@gmail.com" target="_blank">
                  <i class="icon icon-mail"></i>
                  <span class="label">Email</span>
                </a>
              </li>
            

            <!-- RSS -->
            <li class="navigation__item">
              <a href="/JacekRojek/feed.xml" title="Subscribe" target="_blank">
                <i class="icon icon-rss"></i>
                <span class="label">RSS</span>
              </a>
            </li>
          
            </ul>
          </nav>

        </div>

      </div>

    </div>

    <div class="panel-cover--overlay"></div>
  </div>
</header>


    <div class="content-wrapper">
      <div class="content-wrapper__inner">
        <article class="post-container post-container--single">
  <header class="post-header">
    <div class="post-meta">
      <time datetime="9 Jun 2016" class="post-meta__date date">9 Jun 2016</time> &#8226; <span class="post-meta__tags">on </span>
    </div>
    <h1 class="post-title">Unity Achievements System Tutorial Pt.2</h1>
  </header>

  <section class="post">
    <p><a href="https://indiedevart.wordpress.com/2016/06/08/achievements-system/">Previous Part</a></p>

<p>In this part I’ll demonstrate how to read values from JSON files and mapping them into Achievement Class. I’ll refer to scripts from  previous part, so you should have them working already.</p>

<p>[caption id=”attachment_2310” align=”alignnone” width=”630”]<img class="alignnone size-full wp-image-2310" src="https://indiedevart.files.wordpress.com/2016/06/testach03.gif" alt="TestAch03" width="630" height="403" /> Awesome Icon, I know.[/caption]</p>

<p>Let’s crate JSON file first. If you are not familiar with this type of data, read my article about it <a href="https://indiedevart.wordpress.com/2016/05/17/litjson-in-unity3d/">here</a>.</p>
<pre>[
 {
 "ID":0,
 "Title": "Slayer",
 "Description": "kill 10 Enemies"
 },
 {
 "ID": 1,
 "Title": "Explorer",
 "Description": "Visit another planet"
 },
 {
 "ID" : 2,
 "Title": "First Blood",
 "Description": "Die!"
 },
 {
 "ID": 3,
 "Title": "Collecter",
 "Description": "collect 5 items"
 }
]</pre>
<p>In this file we will store information that will be displayed in our achievement panel. We need Title and Description.</p>

<p> </p>

<p>Next You will need a database of items, Items will be stored in <a href="https://indiedevart.wordpress.com/2016/05/12/introduction-to-generics/">generic List</a>.</p>

<p>We take all vales form JSON file and add 2 new properties State and Sprite, sprite is loaded from array of sprites. Sprites must be sliced first to store them in array.</p>

<div class="language-c# highlighter-rouge"><pre class="highlight"><code><span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine.UI</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">LitJson</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.IO</span><span class="p">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">Database_Achievements</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span> 
  <span class="k">private</span> <span class="n">List</span><span class="p">&amp;</span><span class="n">lt</span><span class="p">;</span><span class="n">Achievement</span><span class="p">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">databaseAchievements</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&amp;</span><span class="n">lt</span><span class="p">;</span><span class="n">Achievement</span><span class="p">&amp;</span><span class="n">gt</span><span class="p">;();</span>
  <span class="k">private</span> <span class="n">JsonData</span> <span class="n">AchData</span><span class="p">;</span>
  <span class="c1">// Use this for initialization
</span>  <span class="k">void</span> <span class="nf">Awake</span><span class="p">()</span>
  <span class="p">{</span>
     <span class="n">AchData</span> <span class="p">=</span> <span class="n">JsonMapper</span><span class="p">.</span><span class="nf">ToObject</span><span class="p">(</span><span class="n">File</span><span class="p">.</span><span class="nf">ReadAllText</span><span class="p">(</span><span class="n">Application</span><span class="p">.</span><span class="n">dataPath</span> <span class="p">+</span> <span class="p">&amp;</span><span class="n">quot</span><span class="p">;/</span><span class="n">Achievements</span><span class="p">.</span><span class="n">json</span><span class="p">&amp;</span><span class="n">quot</span><span class="p">;));</span>

     <span class="nf">ConstructItemDatabase</span><span class="p">();</span>
     <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span><span class="n">databaseAchievements</span><span class="p">[</span><span class="m">1</span><span class="p">].</span><span class="n">ID</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">void</span> <span class="nf">ConstructItemDatabase</span><span class="p">()</span>
  <span class="p">{</span>
     <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&amp;</span><span class="n">lt</span><span class="p">;</span> <span class="n">AchData</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
     <span class="p">{</span>
<span class="n">databaseAchievements</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="k">new</span> <span class="nf">Achievement</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">AchData</span><span class="p">[</span><span class="n">i</span><span class="p">][&amp;</span><span class="n">quot</span><span class="p">;</span><span class="n">ID</span><span class="p">&amp;</span><span class="n">quot</span><span class="p">;],</span> <span class="n">AchData</span><span class="p">[</span><span class="n">i</span><span class="p">][&amp;</span><span class="n">quot</span><span class="p">;</span><span class="n">Title</span><span class="p">&amp;</span><span class="n">quot</span><span class="p">;].</span><span class="nf">ToString</span><span class="p">(),</span> <span class="n">AchData</span><span class="p">[</span><span class="n">i</span><span class="p">][&amp;</span><span class="n">quot</span><span class="p">;</span><span class="n">Description</span><span class="p">&amp;</span><span class="n">quot</span><span class="p">;].</span><span class="nf">ToString</span><span class="p">()));</span>
     <span class="p">}</span>
  <span class="p">}</span>
<span class="k">public</span> <span class="n">Achievement</span> <span class="nf">FetchItembyID</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&amp;</span><span class="n">lt</span><span class="p">;</span> <span class="n">databaseAchievements</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
    <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">databaseAchievements</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">ID</span> <span class="p">==</span> <span class="n">id</span><span class="p">)</span>
          <span class="k">return</span> <span class="n">databaseAchievements</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
    <span class="p">}</span>
     <span class="k">return</span> <span class="k">null</span><span class="p">;</span>
  <span class="p">}</span>
 <span class="k">public</span> <span class="k">class</span> <span class="nc">Achievement</span>
 <span class="p">{</span>
  <span class="k">public</span> <span class="kt">string</span> <span class="n">Title</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
  <span class="k">public</span> <span class="kt">string</span> <span class="n">Describtion</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
  <span class="k">public</span> <span class="n">Sprite</span> <span class="n">image</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
  <span class="k">public</span> <span class="kt">bool</span> <span class="n">active</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
  <span class="k">public</span> <span class="kt">int</span> <span class="n">ID</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
  <span class="k">private</span> <span class="n">Sprite</span><span class="p">[]</span> <span class="n">sprites</span> <span class="p">=</span> <span class="n">UnityEngine</span><span class="p">.</span><span class="n">Resources</span><span class="p">.</span><span class="n">LoadAll</span><span class="p">&amp;</span><span class="n">lt</span><span class="p">;</span><span class="n">Sprite</span><span class="p">&amp;</span><span class="n">gt</span><span class="p">;(&amp;</span><span class="n">quot</span><span class="p">;</span><span class="n">Achievements</span><span class="p">&amp;</span><span class="n">quot</span><span class="p">;);</span>
<span class="k">public</span> <span class="nf">Achievement</span><span class="p">(</span><span class="kt">int</span> <span class="n">newID</span><span class="p">,</span> <span class="kt">string</span> <span class="n">name</span><span class="p">,</span> <span class="kt">string</span> <span class="n">desc</span><span class="p">)</span>
  <span class="p">{</span>
     <span class="k">this</span><span class="p">.</span><span class="n">Title</span> <span class="p">=</span> <span class="n">name</span><span class="p">;</span>
     <span class="k">this</span><span class="p">.</span><span class="n">Describtion</span> <span class="p">=</span> <span class="n">desc</span><span class="p">;</span>
     <span class="k">this</span><span class="p">.</span><span class="n">active</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
     <span class="k">this</span><span class="p">.</span><span class="n">image</span> <span class="p">=</span> <span class="n">sprites</span><span class="p">[</span><span class="n">newID</span><span class="p">];</span>
     <span class="k">this</span><span class="p">.</span><span class="n">ID</span> <span class="p">=</span> <span class="n">newID</span><span class="p">;</span>
  <span class="p">}</span>
<span class="nf">Achievement</span><span class="p">(</span><span class="kt">string</span> <span class="n">name</span><span class="p">)</span>
  <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="n">Title</span> <span class="p">=</span> <span class="n">name</span><span class="p">;</span>
  <span class="p">}</span>

 <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<p>We need a method for finding item in database, we will use FetchItembyID(int id) to find item by int ID number.</p>

<p>We add new method to the AchievementPanel Class.</p>

<div class="language-c# highlighter-rouge"><pre class="highlight"><code><span class="k">void</span> <span class="nf">PassInformations</span><span class="p">(</span><span class="kt">int</span> <span class="n">ID</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">Database_Achievements</span><span class="p">.</span><span class="n">Achievement</span> <span class="n">ach</span> <span class="p">=</span><span class="n">database</span><span class="p">.</span><span class="nf">FetchItembyID</span><span class="p">(</span><span class="n">ID</span><span class="p">);</span>
  <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span><span class="n">ach</span><span class="p">.</span><span class="n">ID</span><span class="p">);</span>
  <span class="n">panelAchievements</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="nf">GetChild</span><span class="p">(</span><span class="m">0</span><span class="p">).</span><span class="n">GetComponent</span><span class="p">&amp;</span><span class="n">lt</span><span class="p">;</span><span class="n">Text</span><span class="p">&amp;</span><span class="n">gt</span><span class="p">;().</span><span class="n">text</span> <span class="p">=</span> <span class="n">ach</span><span class="p">.</span><span class="n">Title</span><span class="p">;</span>
  <span class="n">panelAchievements</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="nf">GetChild</span><span class="p">(</span><span class="m">1</span><span class="p">).</span><span class="n">GetComponent</span><span class="p">&amp;</span><span class="n">lt</span><span class="p">;</span><span class="n">Text</span><span class="p">&amp;</span><span class="n">gt</span><span class="p">;().</span><span class="n">text</span> <span class="p">=</span> <span class="n">ach</span><span class="p">.</span><span class="n">Describtion</span><span class="p">;</span>
  <span class="n">panelAchievements</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="nf">GetChild</span><span class="p">(</span><span class="m">2</span><span class="p">).</span><span class="n">GetComponent</span><span class="p">&amp;</span><span class="n">lt</span><span class="p">;</span><span class="n">Image</span><span class="p">&amp;</span><span class="n">gt</span><span class="p">;().</span><span class="n">sprite</span> <span class="p">=</span> <span class="n">ach</span><span class="p">.</span><span class="n">image</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

<p>This will pass the values from database to UI.</p>

<p>I’m calling it inside existing CountClicks() method.</p>

<div class="language-c# highlighter-rouge"><pre class="highlight"><code><span class="c1">//We need to add following namespace
</span><span class="k">using</span> <span class="nn">UnityEngine.UI</span><span class="p">;</span>
<span class="c1">//and reference
</span><span class="k">public</span> <span class="n">Database_Achievements</span> <span class="n">database</span><span class="p">;</span>
  <span class="k">void</span> <span class="nf">CountClicks</span><span class="p">()</span>
  <span class="p">{</span>
  <span class="n">numberOfClicks</span><span class="p">++;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">numberOfClicks</span> <span class="p">&amp;</span><span class="n">gt</span><span class="p">;=</span> <span class="m">10</span> <span class="p">&amp;</span><span class="n">amp</span><span class="p">;&amp;</span><span class="n">amp</span><span class="p">;</span> <span class="p">!</span><span class="n">achievement01Unlocked</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="nf">PassInformations</span><span class="p">(</span><span class="m">1</span><span class="p">);</span>
      <span class="nf">StartCoroutine</span><span class="p">(</span><span class="nf">PanelCall</span><span class="p">());</span>
      <span class="n">achievement01Unlocked</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
</code></pre>
</div>

<p>You need to add reference to the database. You can attach database script to any object, i would crate new empty one. In next part i’ll show you how to create a new scene for collection of all achievements. You will also learn how to pass information between scenes. Stay Awesome!</p>

  </section>
  
  <script>

</script>

</article>



      </div>

      <footer class="footer">
  <span class="footer__copyright">&copy; 2016 Jacek Rojek. All rights reserved.</span>
</footer> 

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script type="text/javascript" src="/JacekRojek/js/main.js"></script>

    </div>
  </body>
</html>