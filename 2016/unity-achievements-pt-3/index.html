<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Unity Achievements System Tutorial Pt.3</title>
  <meta name="description" content="Software development blog">
  <meta name="author" content="Jacek Rojek">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="JacekRojek">
  <meta name="twitter:description" content="Software development blog">

  <meta property="og:type" content="article">
  <meta property="og:title" content="JacekRojek">
  <meta property="og:description" content="Software development blog">

  <link rel="apple-touch-icon" sizes="57x57" href="/JacekRojek/images/favicons/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/JacekRojek/images/favicons/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/JacekRojek/images/favicons/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/JacekRojek/images/favicons/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/JacekRojek/images/favicons/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/JacekRojek/images/favicons/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/JacekRojek/images/favicons/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/JacekRojek/images/favicons/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/JacekRojek/images/favicons/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" href="/JacekRojek/images/favicons/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/JacekRojek/images/favicons/favicon-194x194.png" sizes="194x194">
  <link rel="icon" type="image/png" href="/JacekRojek/images/favicons/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/JacekRojek/images/favicons/android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="/JacekRojek/images/favicons/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="/JacekRojek/images/favicons/manifest.json">
  <link rel="shortcut icon" href="/JacekRojek/images/favicons/favicon.ico">
  <meta name="msapplication-TileColor" content="#ffc40d">
  <meta name="msapplication-TileImage" content="/JacekRojek/images/favicons/mstile-144x144.png">
  <meta name="theme-color" content="#ffffff">

  <link rel="stylesheet" href="/JacekRojek/css/main.css">
  <link rel="canonical" href="https://jacekrojek.github.io/JacekRojek//JacekRojek//2016/unity-achievements-pt-3/">
  <link rel="alternate" type="application/rss+xml" title="JacekRojek" href="/JacekRojek/feed.xml">
</head>


  <body>
    <span class="mobile btn-mobile-menu">
  <i class="icon icon-list btn-mobile-menu__icon"></i>
  <i class="icon icon-x-circle btn-mobile-close__icon hidden"></i>
</span>
  
<header class="panel-cover" style="background-image: url(/JacekRojek/images/cover.jpg)">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">
        <a href="/JacekRojek/" title="link to home of JacekRojek">
          <img src="/JacekRojek/images/profile.jpg" class="user-image" alt="My Profile Photo">
          <h1 class="panel-cover__title panel-title">JacekRojek</h1>
        </a>
        <hr class="panel-cover__divider">
        <p class="panel-cover__description">Software development blog</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary">

        <div class="navigation-wrapper">

          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">
              <li class="navigation__item"><a href="/JacekRojek/#blog" title="link to JacekRojek blog" class="blog-button">Blog</a></li>
            </ul>
          </nav>

          <nav class="cover-navigation navigation--social">
            <ul class="navigation">
          
            
              <!-- Twitter -->
              <li class="navigation__item">
                <a href="http://twitter.com/JRojek93" title="@JRojek93 on Twitter" target="_blank">
                  <i class="icon icon-social-twitter"></i>
                  <span class="label">Twitter</span>
                </a>
              </li>
            

            
              <!-- Facebook -->
              <li class="navigation__item">
                <a href="http://fb.me/jacek.rojek.7" title="jacek.rojek.7 on Facebook" target="_blank">
                  <i class="icon icon-social-facebook"></i>
                  <span class="label">Facebook</span>
                </a>
              </li>
            

            
              <!-- LinkedIn -->
              <li class="navigation__item">
                <a href="https://www.linkedin.com/in/jacek-rojek-b7a396105" title="jacek-rojek-b7a396105 on LinkedIn" target="_blank">
                  <i class="icon icon-social-linkedin"></i>
                  <span class="label">LinkedIn</span>
                </a>
              </li>
            

            
              <!-- GitHub -->
              <li class="navigation__item">
                <a href="https://www.github.com/JacekRojek" title="JacekRojek on GitHub" target="_blank">
                  <i class="icon icon-social-github"></i>
                  <span class="label">GitHub</span>
                </a>
              </li>
            

            
              <!-- Email -->
              <li class="navigation__item">
                <a href="mailto:j.rojek19@gmail.com" title="Email j.rojek19@gmail.com" target="_blank">
                  <i class="icon icon-mail"></i>
                  <span class="label">Email</span>
                </a>
              </li>
            

            <!-- RSS -->
            <li class="navigation__item">
              <a href="/JacekRojek/feed.xml" title="Subscribe" target="_blank">
                <i class="icon icon-rss"></i>
                <span class="label">RSS</span>
              </a>
            </li>
          
            </ul>
          </nav>

        </div>

      </div>

    </div>

    <div class="panel-cover--overlay"></div>
  </div>
</header>


    <div class="content-wrapper">
      <div class="content-wrapper__inner">
        <article class="post-container post-container--single">
  <header class="post-header">
    <div class="post-meta">
      <time datetime="10 Jun 2016" class="post-meta__date date">10 Jun 2016</time> &#8226; <span class="post-meta__tags">on </span>
    </div>
    <h1 class="post-title">Unity Achievements System Tutorial Pt.3</h1>
  </header>

  <section class="post">
    <p><a href="https://indiedevart.wordpress.com/2016/06/09/achievements-system-pt-2/">Previous Part</a></p>

<p>In this part You will learn how to create new scene with panel that will list all achievements in your game, and it will highlight achievements that are unlocked.</p>

<p> </p>

<p>First you need to prefab the Achievement panel from first tutorial. Than add new new Scene to the project, and create UI panel  and add multiple panels to it. Use Grid Layout to adjust the locations of panels.</p>

<p><img class=" size-full wp-image-2325 alignleft" src="https://indiedevart.files.wordpress.com/2016/06/capture2.png" alt="Capture2" width="393" height="246" /></p>

<p><img class="  wp-image-2334 alignleft" src="https://indiedevart.files.wordpress.com/2016/06/capture3.png" alt="Capture3.PNG" width="690" height="336" /></p>

<p> </p>

<p> </p>

<p> </p>

<p> </p>

<p> </p>

<p> </p>

<p> </p>

<p> </p>

<p> </p>

<p> </p>

<p> </p>

<p> </p>

<p> </p>

<p> </p>

<p>Now Add buttons to bots scenes and make them change between scenes. Use the following method. Remember to add scenes to build settings.</p>

<p>[code language=”csharp”]
public void LoadLevel(int i)
{
  Application.LoadLevel(i);
}
[/code]
Attach Script with this method to a button on the scene, and select the scene number;</p>

<p><img class="alignnone size-full wp-image-2345" src="https://indiedevart.files.wordpress.com/2016/06/capture4.png" alt="Capture4" width="372" height="86" /></p>

<p>Now Let’s create a scrip that will create achievements panels, and check if achievement is is unlocked.</p>

<p>[code language=”csharp”]
using UnityEngine;
using System.Collections;
using System.Collections.Generic;
using LitJson;
using System.IO;
using UnityEngine.UI;
public class PanelWithAchievements : MonoBehaviour {</p>

<p>public static Dictionary&lt;string, bool&gt; achievements = new Dictionary&lt;string, bool&gt;();
 private static bool DictCreated=false;
 private List&lt;Database_Achievements.Achievement&gt; databaseAchievements;
 private JsonData AchData;
 public GameObject achPanel;</p>

<p>void Start()
  {
  Debug.Log("DictCreated" + DictCreated);
  databaseAchievements = Database_Achievements.databaseAchievements;
//Create Panels based on database items.
  InstntiatePanels();
//Set them all to locked as a default
  foreach (var kvp in achievements)
  {
     GameObject achievement = this.transform.FindChild(kvp.Key).gameObject;
     achievement.transform.FindChild("Panel").gameObject.SetActive(true);
  }
//This will highlight unlocked achievements
  UpdateBoard();</p>

<p>}</p>

<p>void InstntiatePanels()
  {
  if (this.transform.childCount==0)
{
     foreach (Database_Achievements.Achievement ach in databaseAchievements)
     {
         GameObject newach = Instantiate(achPanel);
         newach.transform.SetParent(this.transform);
         newach.name = ach.Title;
         newach.transform.GetChild(2).GetComponent&amp;lt;Image&amp;gt;().sprite = ach.image;
         newach.transform.GetChild(0).GetComponent&amp;lt;Text&amp;gt;().text = ach.Title;
         newach.transform.GetChild(1).GetComponent&amp;lt;Text&amp;gt;().text = ach.Describtion;
//Condition for adding only new items
         if (!achievements.ContainsKey(ach.Title))
         {
             achievements.Add(ach.Title, false);
         }
      }
    }
   }
void UpdateBoard()
   {
     foreach (var kvp in achievements)
     {
         if (kvp.Value == true)
         {
             GameObject achievement = this.transform.FindChild(kvp.Key).gameObject;
             achievement.transform.FindChild("Panel").gameObject.SetActive(false);
          }
      }
   }
}
[/code]
I’m using dictionary to store the state of an achievement and i am using name as a key.
This scrip is attached to a panel object on new scene.</p>

<p>In our AchievementPanel Scrip from previous part we add one extra line in CountClicks() Method</p>

<p>[code language=”csharp”]
void CountClicks()
{
 numberOfClicks++;
 if (numberOfClicks &amp;gt;= 10 &amp;amp;&amp;amp; !achievement01Unlocked)
 {
   PassInformations(1);
   StartCoroutine(PanelCall());
   achievement01Unlocked = true;
//This one here
   PanelWithAchievements.achievements["Explorer"] = true;</p>

<p>}
}
[/code]</p>

<p> </p>

<p>You need to delete all achievements panels from layout, because script will create a new one. Start game on Game Screen and then if achievement will be unlocked go to next scene and see if achievement is highlighted;</p>

<p> </p>

<p><img class="alignnone size-full wp-image-2363" src="https://indiedevart.files.wordpress.com/2016/06/tut04.gif" alt="Tut04" width="1236" height="817" /></p>

<p> </p>

<p>To Avoid creating new panels every time site loads. We need to include one condition in Database script.</p>

<p>[code language=”csharp”]
if (databaseAchievements.Count==0)
[/code]
This will prevent creating too many objects.</p>

<p>[code language=”csharp”]
 void ConstructItemDatabase()
 {
     if (databaseAchievements.Count==0)
{
       for (int i = 0; i &amp;lt; AchData.Count; i++)
       {
databaseAchievements.Add(new Achievement((int)AchData[i]["ID"], AchData[i]["Title"].ToString(), AchData[i]["Description"].ToString()));
       }
     Debug.Log("Database Created");
     }
 }
[/code]</p>

<p> </p>

<p> </p>

<p> </p>

<p>This will probably sum up the topic of achievements. Now you know how to trigger achievements, read data from files and pass information between scenes. If you have any questions write in comments.  Stay Awesome!</p>

<p> </p>

<p> </p>

<p> </p>

<p> </p>

  </section>
  
</article>



      </div>

      <footer class="footer">
  <span class="footer__copyright">&copy; 2016 Jacek Rojek. All rights reserved.</span>
</footer> 

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script type="text/javascript" src="/JacekRojek/js/main.js"></script>

    </div>
  </body>
</html>