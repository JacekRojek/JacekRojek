<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>LitJSON in Unity3D</title>
  <meta name="description" content="Software development blog">
  <meta name="author" content="Jacek Rojek">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="JacekRojek">
  <meta name="twitter:description" content="Software development blog">

  <meta property="og:type" content="article">
  <meta property="og:title" content="JacekRojek">
  <meta property="og:description" content="Software development blog">

  <link rel="apple-touch-icon" sizes="57x57" href="/JacekRojek/images/favicons/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/JacekRojek/images/favicons/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/JacekRojek/images/favicons/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/JacekRojek/images/favicons/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/JacekRojek/images/favicons/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/JacekRojek/images/favicons/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/JacekRojek/images/favicons/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/JacekRojek/images/favicons/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/JacekRojek/images/favicons/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" href="/JacekRojek/images/favicons/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/JacekRojek/images/favicons/favicon-194x194.png" sizes="194x194">
  <link rel="icon" type="image/png" href="/JacekRojek/images/favicons/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/JacekRojek/images/favicons/android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="/JacekRojek/images/favicons/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="/JacekRojek/images/favicons/manifest.json">
  <link rel="shortcut icon" href="/JacekRojek/images/favicons/favicon.ico">
  <meta name="msapplication-TileColor" content="#ffc40d">
  <meta name="msapplication-TileImage" content="/JacekRojek/images/favicons/mstile-144x144.png">
  <meta name="theme-color" content="#ffffff">

  <link rel="stylesheet" href="/JacekRojek/css/main.css">
  <link rel="canonical" href="https://jacekrojek.github.io/JacekRojek//JacekRojek//2016/litjson-in-unity3d/">
  <link rel="alternate" type="application/rss+xml" title="JacekRojek" href="/JacekRojek/feed.xml">
</head>


  <body>
    <span class="mobile btn-mobile-menu">
  <i class="icon icon-list btn-mobile-menu__icon"></i>
  <i class="icon icon-x-circle btn-mobile-close__icon hidden"></i>
</span>
  
<header class="panel-cover" style="background-image: url(/JacekRojek/images/cover.jpg)">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">
        <a href="/JacekRojek/" title="link to home of JacekRojek">
          <img src="/JacekRojek/images/profile.jpg" class="user-image" alt="My Profile Photo">
          <h1 class="panel-cover__title panel-title">JacekRojek</h1>
        </a>
        <hr class="panel-cover__divider">
        <p class="panel-cover__description">Software development blog</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary">

        <div class="navigation-wrapper">

          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">
              <li class="navigation__item"><a href="/JacekRojek/#blog" title="link to JacekRojek blog" class="blog-button">Blog</a></li>
            </ul>
          </nav>

          <nav class="cover-navigation navigation--social">
            <ul class="navigation">
          
            
              <!-- Twitter -->
              <li class="navigation__item">
                <a href="http://twitter.com/JRojek93" title="@JRojek93 on Twitter" target="_blank">
                  <i class="icon icon-social-twitter"></i>
                  <span class="label">Twitter</span>
                </a>
              </li>
            

            
              <!-- Facebook -->
              <li class="navigation__item">
                <a href="http://fb.me/jacek.rojek.7" title="jacek.rojek.7 on Facebook" target="_blank">
                  <i class="icon icon-social-facebook"></i>
                  <span class="label">Facebook</span>
                </a>
              </li>
            

            
              <!-- LinkedIn -->
              <li class="navigation__item">
                <a href="https://www.linkedin.com/in/jacek-rojek-b7a396105" title="jacek-rojek-b7a396105 on LinkedIn" target="_blank">
                  <i class="icon icon-social-linkedin"></i>
                  <span class="label">LinkedIn</span>
                </a>
              </li>
            

            
              <!-- GitHub -->
              <li class="navigation__item">
                <a href="https://www.github.com/JacekRojek" title="JacekRojek on GitHub" target="_blank">
                  <i class="icon icon-social-github"></i>
                  <span class="label">GitHub</span>
                </a>
              </li>
            

            
              <!-- Email -->
              <li class="navigation__item">
                <a href="mailto:j.rojek19@gmail.com" title="Email j.rojek19@gmail.com" target="_blank">
                  <i class="icon icon-mail"></i>
                  <span class="label">Email</span>
                </a>
              </li>
            

            <!-- RSS -->
            <li class="navigation__item">
              <a href="/JacekRojek/feed.xml" title="Subscribe" target="_blank">
                <i class="icon icon-rss"></i>
                <span class="label">RSS</span>
              </a>
            </li>
          
            </ul>
          </nav>

        </div>

      </div>

    </div>

    <div class="panel-cover--overlay"></div>
  </div>
</header>


    <div class="content-wrapper">
      <div class="content-wrapper__inner">
        <article class="post-container post-container--single">
  <header class="post-header">
    <div class="post-meta">
      <time datetime="17 May 2016" class="post-meta__date date">17 May 2016</time> &#8226; <span class="post-meta__tags">on </span>
    </div>
    <h1 class="post-title">LitJSON in Unity3D</h1>
  </header>

  <section class="post">
    <p>Creating databases for our game seems to be a difficult task, but LitJSON makes it really easy. Today we will take a look at simple method of reading  JSON files.</p>

<p>LitJSON is a small and fast library for handling data in the <a href="http://json.org/">JSON</a> format. It is written in C# and is compatible with all .Net languages.</p>

<p>First lets create a JSON file. We can use VisualStudio Community Version or VS Express for Web. To crate Json file you can simply create new text file on your computer and change extension to from .txt to .json.</p>

<p>Now lets open the file in our VS. To demonstrate the example I created list of ships that will be used in my game. So here is the basic layout of the file:</p>
<pre>//Arrays are marked by [].
[
 {
 "agility": 3,
 "armor": 300,
 "cargo": 15,
 "details": "complete the game helping race 1 to unlock ",
 "maxSpeed": 3,
 "weight": 1100
 }, //remember to type comma after every element, except last one
 {
 "details": "complete the game helping race 2 to unlock ",
 "armor": 100,
 "maxSpeed": 2,
 "agility":5,
 "cargo": 10,
 "weight": 800 // no comma here

 }
]</pre>
<p>JSON can store intagers and strings. Key signatures are written between “” and valu is stored after colon( : ) elemants are separated by commas.</p>

<p> </p>

<p>Here is our c# Script</p>

<p>You need to add LitJson liblary, you need to download the dll file first and than add the reference to the project in VS referance manager.</p>
<pre>using LitJson;
<span style="color:#339966;">// We also need System.IO to read the files.</span>
using System.IO;
public class ShipSelection : MonoBehaviour {

/we declare two variables, string and JsonData.
 private string JSONstring;
 private JsonData stateData;

 void Start () {
 
<span style="color:#339966;">// Here we read our file from our game assets as a string field.</span>
 JSONstring = File.ReadAllText(Application.dataPath + "/JSON/ShipsDetails.json");
 Debug.Log(Application.dataPath + "/JSON/ShipsDetails.json");
<span style="color:#339966;">// Now w convert it to JsonData object</span>
 stateData = JsonMapper.ToObject(JSONstring);
 }</pre>
<p>Now when you have referance to the object we can read the selected property from it. To do so lets use this line of code</p>
<pre>panelText.text = stateData[ship_number]["details"].ToString();</pre>
<p>panelText is a reference to an object on the scene;</p>

<p>ship_number is an integer value, defined somewhere in the code: int ship_number =0;</p>

<p>Lets analyze the structure of this code.</p>

<p>To pass the text value we need to convert our data to back to string we use build in method - .ToString()</p>

<p>we use the name of our JsonData object than we select the object Id, in our example we have two objects with indexes 0 and 1. Indexes starts with 0. Now when we are inside our selected object we choose the property wo want to use, lets say “details”.</p>

<p>This will select and display the following</p>
<pre>   complete the game helping race 1 to unlock</pre>
<p>We can select the int values as well</p>
<pre>   SHIP_STATS[0]= (int)stateData[ship_number]["armor"];</pre>
<p>We store the value of ship armor in array of inegers, we can use it as int value and perform math operations on it.</p>

<p>This is very basic example, when we are not creating classes for the objects. This topic will be discused in next post. Have fun with your new tool. And as always Stay Awesome!</p>

  </section>
  
</article>



      </div>

      <footer class="footer">
  <span class="footer__copyright">&copy; 2016 Jacek Rojek. All rights reserved.</span>
</footer> 

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script type="text/javascript" src="/JacekRojek/js/main.js"></script>

    </div>
  </body>
</html>